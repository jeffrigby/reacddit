<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>reacddit</title>
    <meta name="Description" content="Reddit client built with ReactJS." />

    <script>
      // Apply the theme from localStorage on initial load
      (function () {
        try {
          // Try to retrieve and parse the stored state from localStorage
          const savedState = localStorage.getItem('state');
          const state = savedState ? JSON.parse(savedState) : null;

          // Extract the theme from the stored state, defaulting to 'dark' if not found
          const prefersDarkMode = window.matchMedia(
            '(prefers-color-scheme: dark)'
          ).matches;
          const defaultTheme = prefersDarkMode ? 'dark' : 'light';

          const currentTheme =
            state && state.siteSettings && state.siteSettings.theme
              ? state.siteSettings.theme
              : defaultTheme;

          // Apply the theme to the document
          if (currentTheme === 'dark') {
            document.documentElement.setAttribute('data-bs-theme', 'dark');
          } else {
            document.documentElement.removeAttribute('data-bs-theme');
          }
        } catch (error) {
          // Log or handle potential errors, e.g., corrupted localStorage data
          console.error('Error applying theme from localStorage:', error);
        }
      })();
    </script>

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <!-- Icons -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/static/pwa/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/static/pwa/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/static/pwa/favicon-16x16.png"
    />
    <link rel="manifest" href="/static/pwa/manifest.json" />
    <!--
    <link
      rel="mask-icon"
      href="/static/pwa/safari-pinned-tab.svg"
      color="#343a40"
    /> -->
    <link rel="shortcut icon" href="/static/pwa/favicon.ico" />
    <meta name="msapplication-TileColor" content="#343a40" />
    <meta name="msapplication-config" content="/static/pwa/browserconfig.xml" />
    <meta name="theme-color" content="#343a40" />

    <!-- Apple Specific PWA tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="reacddit" />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="/static/pwa/apple-touch-startup-image-1136x640.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
      href="/static/pwa/apple-touch-startup-image-2436x1125.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="/static/pwa/apple-touch-startup-image-1792x828.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="/static/pwa/apple-touch-startup-image-828x1792.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="/static/pwa/apple-touch-startup-image-1334x750.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="/static/pwa/apple-touch-startup-image-1242x2688.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
      href="/static/pwa/apple-touch-startup-image-2208x1242.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="/static/pwa/apple-touch-startup-image-1125x2436.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="/static/pwa/apple-touch-startup-image-1242x2208.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="/static/pwa/apple-touch-startup-image-2732x2048.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
      href="/static/pwa/apple-touch-startup-image-2688x1242.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="/static/pwa/apple-touch-startup-image-2224x1668.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="/static/pwa/apple-touch-startup-image-750x1334.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="/static/pwa/apple-touch-startup-image-2048x2732.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="/static/pwa/apple-touch-startup-image-2388x1668.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="/static/pwa/apple-touch-startup-image-1668x2224.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="/static/pwa/apple-touch-startup-image-640x1136.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="/static/pwa/apple-touch-startup-image-1668x2388.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="/static/pwa/apple-touch-startup-image-2048x1536.png"
    />
    <link
      rel="apple-touch-startup-image"
      media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="/static/pwa/apple-touch-startup-image-1536x2048.png"
    />

    <!-- Cache some common names used by the API -->
    <link rel="preconnect" href="https://api.gfycat.com" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
    <link rel="preconnect" href="https://code.jquery.com" />
    <link rel="preconnect" href="https://oauth.reddit.com" />
    <link rel="preconnect" href="https://ssl.reddit.com" />
    <link rel="preconnect" href="https://stackpath.bootstrapcdn.com" />
    <link rel="preconnect" href="https://thumbs.gfycat.com" />
    <link rel="preconnect" href="https://www.reddit.com" />

    <link rel="stylesheet" href="/static/css/base.css" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div id="root">
      <div class="app-loading" class="d-flex align-content-center h-100">
        <div class="container h-100">
          <div class="row align-items-center h-100">
            <div class="col-6 mx-auto text-center">
              <div class="landing-icon" id="landing-icon"></div>
              <noscript
                ><div>
                  The internet doesn't work without JS. Turn it on!
                </div></noscript
              >
              <div class="d-none text-center" id="error-loading">
                Damn. Something isn't right.
                <div>
                  <button
                    class="btn btn-primary m-2"
                    type="button"
                    id="force-refresh"
                  >
                    Reload
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mobile-detect/1.4.5/mobile-detect.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/mobile-detect/1.4.5/mobile-detect-modernizr.js"
      integrity="sha512-Rm1II6Gy79Hy9IOJ6YJwQ0ixrTsYzw0rwxGSFk5gxDYvbrvHA9qQBShd11eZCUBP4XIJ9gqRCyutRuN5+0vJXw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="/static/pwa/pwa.js"></script>
  </body>
</html>
